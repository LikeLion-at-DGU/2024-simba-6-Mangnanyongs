{% extends 'base.html' %} {% block content %} {% load static %}
<link
    rel="stylesheet"
    type="text/css"
    href="{% static 'css/main/mainlistpage.css'%}"
/>

<div class="content" id="header">
    <div class="Caption Capital" id="Welcome">
        <p><span class="orange">동국대학교</span>에서 지금,</p>
        <p>모집 중인 <span class="orange">근로</span></p>
    </div>
</div>
<!--각 근로 카드 위 부분-->
<div class="content" id="main1">
    <!--교내, 학과 선택 필터-->
    <form action="" method='GET'>
        {% csrf_token %}
        <div id="filter">
            <button class="unchecked button Caption" id="all" value="전체">전체</button>
            <button class="unchecked button Caption" id="oncampus" value="교내">교내</button>
            <button class="unchecked button Caption" id="department" value="학과">학과</button>
        </div>
    <!--검색, 정렬 필터-->
    <div id="convenience">
        <!--검색-->
        <form method="GET" action="" id="textfield" name="textfield"> 
            <input id="search" type="text" class="form-control kw" placeholder="검색" value="{{ kw|default_if_none:'' }}">
            <button type="submit" id="submit" aria-label="submit"></button>
        </form>
        <!--정렬 필터-->
        <form method="GET" action="" id="selector" name="selector"> <!--action 채우기-->
            <label for="sort">
                <select id="sort" class="Caption gray thin so" onchange="changeSelect(this);">
                    {% comment %} {{ so }} {% endcomment %}
                    <option value="" {% if so == '' %}selected{% endif %}>정렬</option>
                    <option value="deadline" {% if so == 'deadline' %}selected{% endif %}>마감순</option>
                    <option value="inquiry" {% if so == 'inquiry' %}selected{% endif %}>조회순</option>
                    <option value="scrap" {% if so == 'scrap' %}selected{% endif %}>스크랩순</option>
                </select>
            </label>
            <!--마감 공고 제외-->
            <label for="end">
                <select id="end" class="Caption gray thin" >
                    <option value="">마감 공고 제외</option>
                    <option value="exclude">제외</option>
                    <option value="include">포함</option>
                </select>
            </label>
            <!--근로 장소-->
            <label for="place">
                <select id="place" class="Caption gray thin">
                    <option value="">근로 장소</option>
                    <option value="경영/사회과학관">경영/사회과학관</option>
                    <option value="과학관">과학관</option>
                    <option value="다향관">다향관</option>
                    <option value="명진관">명진관</option>
                    <option value="법학/만해관">법학/만해관</option>
                    <option value="본관">본관</option>
                    <option value="신공학관">신공학관</option>
                    <option value="남산학사">남산학사</option>
                    <option value="중앙도서관">중앙도서관</option>
                    <option value="원흥관">원흥관</option>
                    <option value="학림관">학림관</option>
                    <option value="학술문화관">학술문화관</option>
                    <option value="혜화관">혜화관</option>
                    <option value="기타">기타</option>
                </select>
            </label>
            <!--소득분위-->
            <label for="income">
                <select id="income" class="Caption gray thin">
                    <option value="">소득 분위</option>
                    <option value="apply">반영</option>
                    <option value="remove">미반영</option>
                </select>
            </label>
        </form>
    </div>
</div>
<div class="content" id="main2">
    {% for post in posts %}
    <div class="card">
        <form action="{% url 'main:scraps' post.id %}" method='POST'> <!--스크랩-->
            {% csrf_token %}
            <button name="star" class="star" value="none">
                {% if request.user in post.scrap.all %}
                    <img src="{% static 'images/icons/blink_star.svg' %}"/>
                {% else %}
                    <img src="{% static 'images/icons/star.svg' %}"/>
                {% endif %}
            </button>
        </form>
        <span class="photo">
            <span class="architecture"></span> <!--DB에 사진이 추가되면 삭제될 거임-->
        </span>
        <span class="detail">
            <div class="information">
                <span class="info classification small orange">
                    #{{post.department}}
                </span>
                <span class="info date small white">
                    남음
                </span>
            </div>
            <a class="title Caption big" href="{% url 'main:post-detail' post.id %}">
                [{{post.organization}}] {{post.title}}
            </a>
            <div class="Caption light up">
                <div>{{post.place}}</div>
                <div>{{post.time}}</div>
            </div>
        </span>
        <button type="button" class="more_info">
            <img src="{% static 'images/icons/moreinfo.svg' %}"/>
        </button>
    </div>
    {% endfor %}
</div>
<script src="{% static 'js/main/mainlistpagetest.js' %}"></script>

<!--정지윤 추가-->
<form id="searchForm" method="get" action="{% url 'main:mainlistpage' %}">
    <input type="hidden" id="kw" name="kw" value="{{ kw|default_if_none:'' }}">
    <input type="hidden" id="page" name="page" value="{{ page }}">
    <input type="hidden" id="so" name="so" value="{{ so }}">
</form>

{% endblock %}